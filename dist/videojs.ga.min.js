/*
* videojs-ga - v0.4.2 - 2016-02-10
* Copyright (c) 2016 Michael Bensoussan
* Licensed MIT
*/
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};videojs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return null==b&&(b={}),c={},this.options()["data-setup"]&&(n=JSON.parse(this.options()["data-setup"]),n.ga&&(c=n.ga)),d=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],k=null,q=null,i=null,j=null,p=[],u=t=0,v=!1,z=!0,x=function(a){return b=a,k=b.eventsToTrack||c.eventsToTrack||d,q=b.percentsPlayedInterval||c.percentsPlayedInterval||10,i=b.eventCategory||c.eventCategory||"Video",j=b.eventLabel||c.eventLabel,b.debug=b.debug||!1},m=function(){j||(j=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),a.call(k,"loadedmetadata")>=0&&w("loadedmetadata",!0)},y=function(){var b,c,d,e,f;for(b=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(b/c*100),d=f=0;99>=f;d=f+=q)e>=d&&a.call(p,d)<0&&(a.call(k,"start")>=0&&0===d&&e>0?w("start",!0):a.call(k,"percentsPlayed")>=0&&0!==e&&w("percent played",!0,d),e>0&&p.push(d));a.call(k,"seek")>=0&&(u=t,t=b,Math.abs(u-t)>1&&(v=!0,w("seek start",!1,u),w("seek end",!1,t)))},g=function(){w("end",!0)},r=function(){var a;a=Math.round(this.currentTime()),w("play",!0,a),v=!1},o=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||v||w("pause",!1,a)},A=function(){var a;a=this.muted()===!0?0:this.volume(),w("volume change",!1,a)},s=function(){w("resize - "+this.width()+"*"+this.height(),!0)},h=function(){var a;a=Math.round(this.currentTime()),w("error",!0,a)},l=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?w("enter fullscreen",!1,a):w("exit fullscreen",!1,a)},w=function(a,c,d){z&&(window.ga?ga("send","event",{eventCategory:i,eventAction:a,eventLabel:j,eventValue:d,nonInteraction:c}):window._gaq?_gaq.push(["_trackEvent",i,a,j,d,c]):b.debug&&console.log("Google Analytics not detected"))},e=function(){return z=!1},f=function(){return z=!0},this.ready(function(){return this.on("loadedmetadata",m),this.on("timeupdate",y),a.call(k,"end")>=0&&this.on("ended",g),a.call(k,"play")>=0&&this.on("play",r),a.call(k,"pause")>=0&&this.on("pause",o),a.call(k,"volumeChange")>=0&&this.on("volumechange",A),a.call(k,"resize")>=0&&this.on("resize",s),a.call(k,"error")>=0&&this.on("error",h),a.call(k,"fullscreen")>=0?this.on("fullscreenchange",l):void 0}),x(b),{sendbeacon:w,setoptions:x,enabletracking:f,disabletracking:e}})}).call(this);